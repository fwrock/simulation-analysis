
        <!DOCTYPE html>
        <html>
        <head>
            <title>Relat√≥rio de Compara√ß√£o de Simula√ß√µes</title>
            <style>
                body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
                .header { background-color: #f0f0f0; padding: 20px; border-radius: 10px; }
                .section { margin: 20px 0; }
                .methodology { background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-left: 4px solid #2196F3; border-radius: 5px; }
                .metric { background-color: #e8f4f8; padding: 10px; margin: 5px 0; border-radius: 5px; }
                .plot { text-align: center; margin: 20px 0; }
                .plot img { max-width: 100%; height: auto; }
                table { border-collapse: collapse; width: 100%; }
                th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                th { background-color: #f2f2f2; }
                .collapsible { background-color: #777; color: white; cursor: pointer; padding: 10px; width: 100%; border: none; text-align: left; outline: none; font-size: 14px; }
                .active, .collapsible:hover { background-color: #555; }
                .content { padding: 0 15px; display: none; overflow: hidden; background-color: #f9f9f9; }
                code { background-color: #f4f4f4; padding: 2px 4px; border-radius: 3px; font-family: monospace; }
                .warning { background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; border-radius: 5px; margin: 10px 0; }
            </style>
            <script>
                function toggleContent(element) {
                    element.classList.toggle("active");
                    var content = element.nextElementSibling;
                    if (content.style.display === "block") {
                        content.style.display = "none";
                    } else {
                        content.style.display = "block";
                    }
                }
            </script>
        </head>
        <body>
            <div class="header">
                <h1>Relat√≥rio de Compara√ß√£o de Simula√ß√µes</h1>
                <p><strong>Simula√ß√£o HTC:</strong> bfs_cenario_1000_viagens_2</p>
                <p><strong>Simula√ß√£o Interscsimulator:</strong> events</p>
                <p><strong>Data de Gera√ß√£o:</strong> 2025-10-05 08:49:07</p>
            </div>
            
            <div class="section">
                <h2>Resumo Executivo</h2>
                <div class="metric">
                    <strong>Score de Similaridade:</strong> 0.998 (99.8%)
                </div>
                <div class="metric">
                    <strong>Score de Reprodutibilidade:</strong> 0.500 (50.0%)
                </div>
                
                <button class="collapsible" onclick="toggleContent(this)">üìä Metodologia dos Scores Principais</button>
                <div class="content">
                    <div class="methodology">
                        
            <strong>Score de Similaridade Geral:</strong><br>
            M√©trica composta que avalia o qu√£o similares s√£o as duas simula√ß√µes atrav√©s de tr√™s componentes:<br>
            ‚Ä¢ <em>Similaridade de Ve√≠culos:</em> 1 - |N_htc - N_ref| / max(N_htc, N_ref)<br>
            ‚Ä¢ <em>Similaridade de Tipos de Eventos:</em> Compara√ß√£o das propor√ß√µes de cada tipo de evento<br>
            ‚Ä¢ <em>Similaridade Temporal:</em> 1 - |dura√ß√£o_htc - dura√ß√£o_ref| / max(dura√ß√£o_htc, dura√ß√£o_ref)<br>
            O score final √© a m√©dia aritm√©tica desses tr√™s componentes (0-1, onde 1 = id√™ntico).
            
                    </div>
                    <div class="methodology">
                        
            <strong>Score de Reprodutibilidade:</strong><br>
            Avalia se as simula√ß√µes reproduzem os mesmos comportamentos atrav√©s de:<br>
            ‚Ä¢ <em>Sobreposi√ß√£o de Ve√≠culos:</em> |ve√≠culos_comuns| / |ve√≠culos_totais|<br>
            ‚Ä¢ <em>Similaridade de Rotas:</em> Para ve√≠culos comuns, compara sequ√™ncias de links visitados<br>
            O score final √© a m√©dia ponderada desses componentes (0-1, onde 1 = perfeitamente reprodut√≠vel).
            
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>M√©tricas de Correla√ß√£o</h2>
                <table>
                    <tr><th>M√©trica</th><th>Valor</th><th>Interpreta√ß√£o</th></tr>
        
                </table>
                
                <button class="collapsible" onclick="toggleContent(this)">üìà Metodologia das Correla√ß√µes</button>
                <div class="content">
                    <div class="methodology">
        
            <strong>Correla√ß√£o de Pearson:</strong><br>
            Mede a rela√ß√£o linear entre vari√°veis das duas simula√ß√µes.<br>
            F√≥rmula: r = Œ£[(x_i - xÃÑ)(y_i - »≥)] / ‚àö[Œ£(x_i - xÃÑ)¬≤Œ£(y_i - »≥)¬≤]<br>
            Valores: -1 (correla√ß√£o negativa perfeita) a +1 (correla√ß√£o positiva perfeita).
            
                    </div>
                    <div class="methodology">
        
            <strong>Correla√ß√£o de Spearman:</strong><br>
            Mede rela√ß√µes monot√¥nicas (n√£o necessariamente lineares) entre vari√°veis.<br>
            Baseada nos rankings dos dados ao inv√©s dos valores absolutos.<br>
            Mais robusta a outliers que a correla√ß√£o de Pearson.
            
                    </div>
                    <div class="methodology">
        
            <strong>M√©tricas Temporais:</strong><br>
            Calculadas usando janelas de tempo adaptativas:<br>
            ‚Ä¢ <em>HTC:</em> Janelas de max(1, dura√ß√£o/100) unidades (otimizado para valores discretos)<br>
            ‚Ä¢ <em>Interscsimulator:</em> Janelas de max(30, dura√ß√£o/50) segundos (otimizado para timestamps cont√≠nuos)<br>
            Para cada janela calcula-se: velocidade m√©dia, densidade m√©dia, n√∫mero de ve√≠culos √∫nicos.
            
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Diferen√ßas Principais</h2>
                <table>
                    <tr><th>M√©trica</th><th>Diferen√ßa Normalizada</th><th>Avalia√ß√£o</th></tr>
        <tr><td>vehicles_diff</td><td>0.0000</td><td>Muito Similar</td></tr><tr><td>distance_diff</td><td>20781.5743</td><td>Muito Diferente</td></tr><tr><td>speed_diff</td><td>0.0279</td><td>Muito Similar</td></tr><tr><td>travel_time_diff</td><td>53.9970</td><td>Muito Diferente</td></tr><tr><td>throughput_diff</td><td>0.0000</td><td>Muito Similar</td></tr><tr><td>vehicles_rel_diff</td><td>0.0000</td><td>Muito Similar</td></tr><tr><td>speed_rel_diff</td><td>0.2334</td><td>Similar</td></tr><tr><td>travel_time_rel_diff</td><td>4.1050</td><td>Muito Diferente</td></tr>
                </table>
                
                <button class="collapsible" onclick="toggleContent(this)">üîç Metodologia do C√°lculo de Diferen√ßas</button>
                <div class="content">
                    <div class="methodology">
        
            <strong>C√°lculo de Diferen√ßas:</strong><br>
            Para cada m√©trica M: |M_htc - M_ref| / max(|M_htc|, |M_ref|)<br>
            Normaliza√ß√£o permite comparar m√©tricas de diferentes escalas.<br>
            Valores pr√≥ximos a 0 indicam alta similaridade, pr√≥ximos a 1 indicam alta diferen√ßa.
            
                    </div>
                    <div class="methodology">
        
            <strong>M√©tricas B√°sicas:</strong><br>
            ‚Ä¢ <em>Total de Ve√≠culos:</em> Contagem de IDs √∫nicos de ve√≠culos<br>
            ‚Ä¢ <em>Dist√¢ncia Total:</em> Soma das dist√¢ncias percorridas (eventos 'journey_completed')<br>
            ‚Ä¢ <em>Velocidade M√©dia:</em> M√©dia das velocidades calculadas em eventos 'enter_link'<br>
            ‚Ä¢ <em>Tempo de Viagem M√©dio:</em> Diferen√ßa temporal entre primeiro e √∫ltimo evento por ve√≠culo<br>
            ‚Ä¢ <em>Throughput:</em> Ve√≠culos √∫nicos / dura√ß√£o da simula√ß√£o
            
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Testes Estat√≠sticos</h2>
                <table>
                    <tr><th>Teste</th><th>Estat√≠stica</th><th>P-valor</th><th>Interpreta√ß√£o</th></tr>
        <tr><td>speed_t_test</td><td>-1.0970</td><td>0.2727</td><td>Sem diferen√ßa significativa (p ‚â• 0.1)</td></tr><tr><td>speed_ks_test</td><td>0.2430</td><td>0.0000</td><td>Diferen√ßa altamente significativa (p < 0.001)</td></tr><tr><td>density_mannwhitney</td><td>5231847.0000</td><td>0.0000</td><td>Diferen√ßa altamente significativa (p < 0.001)</td></tr>
                </table>
                
                <button class="collapsible" onclick="toggleContent(this)">üî¨ Metodologia dos Testes Estat√≠sticos</button>
                <div class="content">
                    <div class="methodology">
        
            <strong>Teste t para Velocidades:</strong><br>
            Testa se as m√©dias de velocidade entre simula√ß√µes s√£o estatisticamente diferentes.<br>
            H‚ÇÄ: Œº_htc = Œº_ref (m√©dias iguais)<br>
            H‚ÇÅ: Œº_htc ‚â† Œº_ref (m√©dias diferentes)<br>
            p < 0.05 indica diferen√ßa significativa.
            
                    </div>
                    <div class="methodology">
        
            <strong>Teste Kolmogorov-Smirnov para Velocidades:</strong><br>
            Testa se as distribui√ß√µes de velocidade s√£o id√™nticas.<br>
            Compara as fun√ß√µes de distribui√ß√£o cumulativa (CDF) das duas amostras.<br>
            Mais sens√≠vel a diferen√ßas na forma da distribui√ß√£o que o teste t.
            
                    </div>
                    <div class="methodology">
        
            <strong>Teste Mann-Whitney U para Densidades:</strong><br>
            Teste n√£o-param√©trico que compara medianas de densidade entre simula√ß√µes.<br>
            N√£o assume distribui√ß√£o normal dos dados.<br>
            Baseado na compara√ß√£o de rankings entre as amostras.
            
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Considera√ß√µes Metodol√≥gicas</h2>
                <div class="warning">
                    <h3>‚ö†Ô∏è Adapta√ß√µes Espec√≠ficas para Simuladores</h3>
                    <p><strong>Processamento Temporal Adaptativo:</strong> O sistema detecta automaticamente o tipo de simulador e ajusta as janelas temporais:</p>
                    <ul>
                        <li><strong>HTC:</strong> Usa valores discretos de 'tick' com janelas pequenas otimizadas para dados pontuais</li>
                        <li><strong>Interscsimulator:</strong> Usa timestamps cont√≠nuos com janelas maiores para suaviza√ß√£o temporal</li>
                    </ul>
                    <p>Esta adapta√ß√£o resolve problemas de visualiza√ß√£o onde dados HTC apareciam como "zig-zag" devido ao uso de janelas temporais inadequadas para sua natureza discreta.</p>
                </div>
                
                <div class="warning">
                    <h3>üìù Limita√ß√µes e Interpreta√ß√£o</h3>
                    <ul>
                        <li><strong>Normaliza√ß√£o de IDs:</strong> Assume mapeamento 1:1 entre ve√≠culos das simula√ß√µes</li>
                        <li><strong>Sincroniza√ß√£o Temporal:</strong> Alinhamento baseado em timestamps pode introduzir pequenas discrep√¢ncias</li>
                        <li><strong>Signific√¢ncia Estat√≠stica:</strong> P-valores < 0.05 indicam diferen√ßas estatisticamente detect√°veis, mas n√£o necessariamente pr√°ticas</li>
                        <li><strong>Tamanho da Amostra:</strong> Resultados mais confi√°veis com maior n√∫mero de eventos e ve√≠culos</li>
                    </ul>
                </div>
            </div>
            
            <div class="section">
                <h2>Gr√°ficos de An√°lise</h2>
        
                <div class="plot">
                    <h3>Basic Metrics Comparison</h3>
                    <img src="output/plots/basic_metrics_comparison.png" alt="Basic Metrics Comparison">
                </div>
                
                <div class="plot">
                    <h3>Speed Distribution</h3>
                    <img src="output/plots/speed_distribution.png" alt="Speed Distribution">
                </div>
                
                <div class="plot">
                    <h3>Interactive Dashboard</h3>
                    <img src="output/plots/interactive_dashboard.html" alt="Interactive Dashboard">
                </div>
                
            </div>
        </body>
        </html>
        